# PromptHub MCP Adapter v2.1.3 发布说明

## 🎯 关键修复版本

这是一个关键修复版本，彻底解决了AI客户端中搜索结果不显示提示词内容的问题。

## 🐛 主要修复

### 搜索结果内容显示修复
- **问题描述**：在AI客户端（如Cursor、Claude Desktop）中使用MCP工具搜索时，结果只显示标题和描述，不显示实际的提示词内容
- **根本原因**：MCP适配器错误地尝试重新解析已经格式化好的响应文本，导致丢失了原本正确的内容
- **修复方案**：优化响应解析逻辑，直接使用MCP服务器返回的已格式化文本，不再进行二次解析

### 技术细节
- **问题定位**：MCP服务器返回的`response.content.text`已经是完整格式化的文本（包含提示词内容）
- **错误逻辑**：适配器尝试将其解析为JSON并重新格式化，使用了原始数据而非已处理的内容
- **修复逻辑**：直接使用`response.content.text`，避免不必要的重新解析和格式化

## 🔧 修复的文件
- `prompthub-mcp-adapter/index.js` - 修复响应解析逻辑（第421-444行）

## 📊 影响范围
- ✅ 所有AI客户端现在都能正确显示搜索结果中的完整提示词内容
- ✅ 用户可以直接在搜索结果中看到并复制提示词文本
- ✅ 解决了困扰用户的核心显示问题
- ✅ 保持与现有功能的完全兼容性

## 🚀 使用方法

更新到最新版本：
```bash
# 如果使用npm全局安装
npm update -g prompthub-mcp

# 或者在AI客户端配置中使用最新版本
"args": ["-y", "prompthub-mcp@latest"]
```

## 🧪 测试验证

可以通过以下命令验证修复：
```bash
echo '{"jsonrpc":"2.0","id":1,"method":"tools/call","params":{"name":"unified_search","arguments":{"query":"合同","max_results":1,"include_content":true}}}' | node index.js
```

应该能看到完整的提示词内容，包括实际的提示词文本。

## 📝 版本历史

- **v2.1.3** - 修复AI客户端中搜索结果内容显示问题
- **v2.1.2** - 修复内容提取逻辑
- **v2.1.1** - 优化搜索结果格式化
- **v2.1.0** - 添加统一搜索功能

---

**重要提醒**：这个修复解决了长期存在的内容显示问题，强烈建议所有用户更新到此版本。
