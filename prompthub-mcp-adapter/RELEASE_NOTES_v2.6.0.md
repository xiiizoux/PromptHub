# PromptHub MCP Adapter v2.6.0 Release Notes

## 🎉 重大功能更新 - Context Engineering 支持

### ✨ 新功能

#### 🧠 Context Engineering 完全支持
- **全新功能**: 完整支持 PromptHub 的 Context Engineering 功能
- **智能上下文适配**: 根据用户输入动态调整提示词内容
- **多种处理流水线**:
  - `default`: 完整的上下文工程处理（4个阶段）
  - `fast`: 快速处理模式（基础上下文）
  - `deep`: 深度分析模式（高级个性化）

#### 🔧 动态工具调用增强
- **自动工具发现**: 支持调用服务器端新增的工具，无需适配器更新
- **向后兼容**: 保持对所有现有工具的完整支持
- **智能错误处理**: 更友好的错误信息和建议

### 🚀 性能优化

#### ⚡ 响应处理优化
- **格式化增强**: 改进了工具响应的格式化逻辑
- **内容完整性**: 确保长内容的完整显示
- **元数据保留**: 保留重要的处理元数据信息

#### 🔐 认证机制完善
- **用户级认证**: 完整支持用户级 API 密钥认证
- **上下文隔离**: 确保用户上下文的私密性和安全性
- **会话管理**: 改进的会话状态管理

### 🛠️ 技术改进

#### 📡 MCP 协议兼容性
- **协议版本**: 完全兼容 MCP 2024-11-05 协议
- **工具列表**: 支持 21+ 个预定义工具
- **动态扩展**: 支持服务器端工具的动态扩展

#### 🔍 调试和监控
- **详细日志**: 增强的日志记录和错误追踪
- **性能监控**: 工具调用性能监控
- **状态报告**: 改进的连接状态报告

### 📋 测试验证

#### ✅ 全面测试覆盖
- **Context Engineering**: 所有三种流水线模式测试通过
- **工具兼容性**: 21个预定义工具全部测试通过
- **MCP 协议**: 完整的协议兼容性验证
- **认证流程**: 用户级和系统级认证测试通过

#### 🎯 性能基准
- **Default Pipeline**: ~880ms 处理时间
- **Fast Pipeline**: ~420ms 处理时间  
- **Deep Pipeline**: ~580ms 处理时间
- **工具响应**: 平均 <1s 响应时间

### 🔄 升级指南

#### 从 v2.5.0 升级
```bash
# 更新到最新版本
npm install -g prompthub-mcp-adapter@latest

# 或使用 npx（推荐）
npx prompthub-mcp-adapter@latest
```

#### 配置更新
无需配置更改，完全向后兼容现有配置。

#### 新功能使用
Context Engineering 功能会自动可用，支持以下参数：
- `promptId`: 提示词ID
- `input`: 用户输入内容
- `pipeline`: 处理流水线（default/fast/deep）

### 🐛 修复的问题

- 修复了用户级 API 密钥的 SHA256 哈希验证问题
- 解决了 Context Engineering 的用户身份验证问题
- 改进了长内容的响应格式化
- 优化了错误信息的显示

### 📚 文档更新

- 更新了 Context Engineering 使用说明
- 添加了性能基准测试结果
- 完善了故障排除指南

### 🙏 致谢

感谢所有参与测试和反馈的用户，特别是对 Context Engineering 功能的深度测试。

---

**发布日期**: 2025-07-04  
**版本**: v2.6.0  
**兼容性**: Node.js 16+  
**MCP 协议**: 2024-11-05
